<template>
  <div>
    <template v-if="isEvaluatorActive">
      <OverlayItem v-for="(item,i) in prints"
                   :key="i"
                   :index="i"
      ></OverlayItem>
      <!-- <img src="http://dev.eney.com.ua:8081/image/cache/data/photo/1/om-ua-image-data-products-10gorn-51K001C00-360x360.jpg" alt="" /> -->
      <div class="footer">
        <div @click="addPrint" class="d-flex align-center cursor-pointer">
          <svg width="38" height="38" viewBox="0 0 38 38" fill="none" xmlns="http://www.w3.org/2000/svg" class="mr-3">
            <path d="M19 0C8.50671 0 0 8.50671 0 19C0 29.4933
                    8.50671 38 19 38C29.4933 38 38 29.4933 38 19C37.9882
                    8.51165 29.4883 0.0117513 19 0ZM19 36.7333C9.20622
                    36.7333 1.26667 28.7938 1.26667 19C1.26667 9.20622
                    9.20622 1.26667 19 1.26667C28.7938 1.26667 36.7333
                    9.20622 36.7333 19C36.7222 28.7891 28.7891 36.7222
                    19 36.7333Z" fill="#333333"/>
            <path d="M11.3845 23.6538L14.7693 26.6154L12.0873 29.184L9.0928
                    28.43L8.42304 26.1923L11.3845 23.6538Z" fill="#006EC7"/>
            <path d="M13.9195 19.4617L13.3796 18.9217C13.3794 18.9215 13.3792
                    18.9214 13.379 18.9212C13.3789 18.921 13.3787
                    18.9209 13.3785 18.9207L11.4736 17.0158C11.4736 17.0157
                    11.4734 17.0156 11.4733 17.0155C11.4732 17.0154
                    11.4731 17.0153 11.473 17.0151L9.56776 15.1099C9.56771
                    15.1099 9.56767 15.1098 9.56763 15.1098C9.56759
                    15.1097 9.56754 15.1097 9.5675 15.1097L8.521
                    14.0632C8.18502 13.7272 8 13.2805 8 12.8054C8 12.3303 8.18507
                    11.8836 8.521 11.5477L11.5475 8.52113C11.8835
                    8.1852 12.3302 8.00013 12.8053 8.00013C13.2804 8.00013
                    13.7271 8.18515 14.063 8.52113L19.4616 13.9196L23.1259
                    10.2553C23.7394 9.64184 24.5082 9.20519 25.3493
                    8.99254L29.1975 8.01977C29.4175 7.96412 29.6507
                    8.02836 29.8112 8.18894C29.9717 8.34942 30.036 8.58253
                    29.9803 8.80261L29.0075 12.6508C28.7949 13.4919
                    28.3582 14.2607 27.7448 14.8741L24.0805 18.5385L29.479
                    23.937C29.815 24.273 30 24.7197 30 25.1948C30
                    25.6699 29.815 26.1165 29.479 26.4525L26.4524 29.479C26.1164
                    29.8151 25.6698 30.0001 25.1946 30.0001C24.7195
                    30.0001 24.2729 29.8151 23.9369 29.4791L20.986 26.5282C20.9855
                    26.5277 20.9851 26.5273 20.9846 26.5268C20.9841
                    26.5264 20.9837 26.5259 20.9833 26.5255L18.5384 24.0806L13.5755
                    29.0435C12.9388 29.6802 12.1024 29.9986 11.2661
                    29.9986C10.4297 29.9986 9.59332 29.6803 8.95661 29.0435C7.68315
                    27.7701 7.68315 25.6981 8.95661 24.4246L13.9195
                    19.4617ZM27.7578 12.3349L28.4658 9.53437L25.6652 10.2424C25.0494
                    10.398 24.4866 10.7177 24.0375 11.1668L23.5293
                    11.6749L26.3252 14.4708L26.8334 13.9627C27.2825 13.5135 27.6021
                    12.9507 27.7578 12.3349V12.3349ZM25.4137 15.3823L22.6178
                    12.5864L20.3731 14.8311L23.169 17.627L25.4137
                    15.3823ZM25.1946 28.711C25.3254 28.711 25.4484 28.6601
                    25.5409 28.5676L28.5675 25.541C28.66 25.4485 28.7109
                    25.3256 28.7109 25.1948C28.7109 25.064 28.66 24.941
                    28.5675 24.8485L13.1516 9.43258C13.0591 9.34011 12.9361
                    9.28915 12.8053 9.28915C12.6745 9.28915 12.5516 9.34011
                    12.459 9.43258L9.43245 12.4592C9.33998 12.5516 9.28902
                    12.6746 9.28902 12.8054C9.28902 12.9362 9.33998 13.0592
                    9.43245 13.1517L10.0233 13.7426L11.9894 11.7764C12.2411
                    11.5247 12.6492 11.5247 12.9009 11.7764C13.1526 12.0281
                    13.1526 12.4362 12.9009 12.6879L10.9348 14.6541L11.929
                    15.6483L12.9423 14.635C13.194 14.3833 13.6021 14.3834
                    13.8538 14.635C14.1055 14.8867 14.1055 15.2948 13.8538
                    15.5465L12.8405 16.5598L13.8347 17.554L15.8008
                    15.5878C16.0526 15.3361 16.4606 15.3361 16.7123 15.5878C16.9641
                    15.8395 16.9641 16.2476 16.7123 16.4993L14.7462
                    18.4654L15.7404 19.4596L16.7537 18.4464C17.0054 18.1947 17.4135
                    18.1947 17.6652 18.4464C17.9169 18.6981 17.9169
                    19.1062 17.6652 19.3579L16.652 20.3711L17.629 21.3481L19.5951
                    19.382C19.8468 19.1303 20.2549 19.1303 20.5066
                    19.382C20.7583 19.6337 20.7583 20.0418 20.5066 20.2935L18.5404
                    22.2596L19.5347 23.2538L20.5479 22.2406C20.7996
                    21.9889 21.2077 21.9889 21.4594 22.2406C21.7111 22.4922
                    21.7111 22.9004 21.4594 23.1521L20.4462 24.1653L21.4404
                    25.1595L23.4064 23.1935C23.6581 22.9418 24.0662
                    22.9418 24.3179 23.1935C24.5697 23.4451 24.5697 23.8532
                    24.3179 24.1049L22.3519 26.071L23.3461 27.0652L24.3593
                    26.052C24.611 25.8003 25.0191 25.8003 25.2708 26.052C25.5225
                    26.3037 25.5225 26.7118 25.2708 26.9635L24.2576
                    27.9767L24.8484 28.5676C24.9409 28.6601 25.0639 28.711
                    25.1946 28.711V28.711ZM17.1758 22.718C17.1749
                    22.7171 17.174 22.7163 17.1731 22.7154C17.1722 22.7145
                    17.1714 22.7136 17.1705 22.7127L15.2854 20.8276C15.2851
                    20.8273 15.2849 20.8271 15.2847 20.8269C15.2844 20.8266
                    15.2842 20.8264 15.2839 20.8261L14.831 20.3732L12.0998
                    23.1044L14.8957 25.9003L17.6269 23.1691L17.1758
                    22.718ZM9.86811 28.132C10.6389 28.9028 11.8932 28.9028 12.664
                    28.132L13.9842 26.8117L11.1883 24.0158L9.86807
                    25.336C9.09725 26.1069 9.09725 27.3612
                    9.86811 28.132V28.132Z" fill="#333333"/>
          </svg>

          <span class="font-weight-medium txt-color-blue">{{$t('btns.add_overlay')}}</span>
        </div>
      </div>
    </template>
    <template v-else>
      <v-sheet>
        <v-skeleton-loader
          class="mx-auto"
          type="card"
        ></v-skeleton-loader>
      </v-sheet>
    </template>
  </div>
</template>

<script>
import { mapGetters, mapMutations, mapActions } from 'vuex';
import OverlayItem from './OverlayItem.vue';

export default {
  inject: ['theme'],
  name: 'EvaluatorBody',
  components: {
    OverlayItem,
  },
  computed: {
    types_and_areas() {
      return {
        types: this.types,
        areas: this.areas,
      };
    },
    ...mapGetters({
      isEvaluatorActive: 'main/isEvaluatorActive',
      prints: 'print/prints',
      types: 'print/types',
      areas: 'print/areas',
    }),
  },
  methods: {
    ...mapMutations({
      clearPrints: 'print/clearPrints',
    }),
    ...mapActions({
      addPrint: 'print/addPrint',
    }),
  },
  watch: {
    types_and_areas(val) {
      if (val.types.length > 0 && val.areas.length > 0) {
        this.addPrint();
      }
    },
    isEvaluatorActive(val, oldVal) {
      if (val === true && oldVal === false) {
        this.addPrint();
      } else if (val === false && oldVal === true) {
        this.clearPrints();
      }
    },
  },
};
</script>

<style scoped>
  .footer {
  }
  .v-card {
    box-shadow: none;
  }
  .txt-color-blue {
    color: #006EC7;
  }
  .cursor-pointer {
    cursor: pointer;
  }
</style>
